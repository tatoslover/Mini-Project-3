<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>PupHub API - Backend Documentation</title>
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet"
        />
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css"
            rel="stylesheet"
        />
        <style>
            :root {
                --primary-color: #2563eb;
                --secondary-color: #1e40af;
                --accent-color: #f59e0b;
                --success-color: #10b981;
                --warning-color: #f59e0b;
                --error-color: #ef4444;
                --text-color: #1f2937;
                --text-light: #6b7280;
                --bg-color: #f9fafb;
                --card-bg: #ffffff;
                --border-color: #e5e7eb;
                --shadow-light: 0 1px 3px rgba(0, 0, 0, 0.1);
                --shadow-medium: 0 4px 6px rgba(0, 0, 0, 0.1);
                --shadow-heavy: 0 10px 15px rgba(0, 0, 0, 0.1);
            }

            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family:
                    -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                    sans-serif;
                background-color: var(--bg-color);
                color: var(--text-color);
                line-height: 1.6;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 20px;
            }

            /* Header */
            .header {
                background: linear-gradient(
                    135deg,
                    var(--primary-color),
                    var(--secondary-color)
                );
                color: white;
                padding: 40px 0;
                text-align: center;
                position: relative;
                overflow: hidden;
            }

            .header::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="white" opacity="0.1"><path d="M0,50 Q250,0 500,50 T1000,50 V100 H0 Z"/></svg>');
                background-size: cover;
            }

            .header-content {
                position: relative;
                z-index: 1;
            }

            .logo {
                font-size: 3rem;
                font-weight: 700;
                margin-bottom: 10px;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            }

            .subtitle {
                font-size: 1.2rem;
                opacity: 0.9;
                margin-bottom: 30px;
            }

            .api-status {
                display: inline-flex;
                align-items: center;
                gap: 8px;
                background: rgba(255, 255, 255, 0.2);
                padding: 8px 16px;
                border-radius: 20px;
                font-size: 0.9rem;
            }

            .status-indicator {
                width: 8px;
                height: 8px;
                border-radius: 50%;
                background: var(--success-color);
                animation: pulse 2s infinite;
            }

            @keyframes pulse {
                0%,
                100% {
                    opacity: 1;
                }
                50% {
                    opacity: 0.5;
                }
            }

            /* Navigation */
            .nav {
                background: var(--card-bg);
                box-shadow: var(--shadow-light);
                position: sticky;
                top: 0;
                z-index: 100;
            }

            .nav-container {
                display: flex;
                justify-content: center;
                padding: 0;
            }

            .nav-links {
                display: flex;
                list-style: none;
                margin: 0;
                padding: 0;
            }

            .nav-link {
                padding: 16px 24px;
                text-decoration: none;
                color: var(--text-color);
                font-weight: 500;
                transition: all 0.3s ease;
                border-bottom: 3px solid transparent;
            }

            .nav-link:hover,
            .nav-link.active {
                color: var(--primary-color);
                border-bottom-color: var(--primary-color);
            }

            /* Main Content */
            .main-content {
                padding: 40px 0;
            }

            .section {
                margin-bottom: 60px;
            }

            .section-title {
                font-size: 2.5rem;
                font-weight: 700;
                color: var(--text-color);
                margin-bottom: 20px;
                text-align: center;
            }

            .section-subtitle {
                font-size: 1.1rem;
                color: var(--text-light);
                text-align: center;
                margin-bottom: 40px;
                max-width: 600px;
                margin-left: auto;
                margin-right: auto;
            }

            /* Cards */
            .card {
                background: var(--card-bg);
                border-radius: 12px;
                box-shadow: var(--shadow-medium);
                padding: 30px;
                margin-bottom: 30px;
                transition:
                    transform 0.3s ease,
                    box-shadow 0.3s ease;
            }

            .card:hover {
                transform: translateY(-5px);
                box-shadow: var(--shadow-heavy);
            }

            .card-header {
                display: flex;
                align-items: center;
                gap: 15px;
                margin-bottom: 20px;
            }

            .card-icon {
                width: 50px;
                height: 50px;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.5rem;
                color: white;
            }

            .card-title {
                font-size: 1.5rem;
                font-weight: 600;
                color: var(--text-color);
            }

            .card-description {
                color: var(--text-light);
                margin-bottom: 20px;
            }

            /* Grid Layout */
            .grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 30px;
            }

            .grid-2 {
                grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            }

            /* Endpoint Cards */
            .endpoint-card {
                border-left: 4px solid var(--primary-color);
            }

            .endpoint-method {
                display: inline-block;
                padding: 4px 8px;
                border-radius: 4px;
                font-size: 0.8rem;
                font-weight: 600;
                color: white;
                margin-right: 10px;
            }

            .method-get {
                background: var(--success-color);
            }
            .method-post {
                background: var(--primary-color);
            }
            .method-delete {
                background: var(--error-color);
            }

            .endpoint-url {
                font-family: "Courier New", monospace;
                background: var(--bg-color);
                padding: 10px;
                border-radius: 6px;
                margin: 10px 0;
                font-size: 0.9rem;
            }

            /* Code Blocks */
            .code-block {
                background: #2d3748;
                color: #e2e8f0;
                padding: 20px;
                border-radius: 8px;
                overflow-x: auto;
                margin: 15px 0;
                font-family: "Courier New", monospace;
                font-size: 0.9rem;
            }

            /* Buttons */
            .btn {
                display: inline-flex;
                align-items: center;
                gap: 8px;
                padding: 12px 24px;
                border: none;
                border-radius: 8px;
                font-weight: 500;
                text-decoration: none;
                transition: all 0.3s ease;
                cursor: pointer;
            }

            .btn-primary {
                background: var(--primary-color);
                color: white;
            }

            .btn-primary:hover {
                background: var(--secondary-color);
                transform: translateY(-2px);
            }

            .btn-secondary {
                background: var(--bg-color);
                color: var(--text-color);
                border: 2px solid var(--border-color);
            }

            .btn-secondary:hover {
                border-color: var(--primary-color);
                color: var(--primary-color);
            }

            /* Stats Grid */
            .stats-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin: 30px 0;
            }

            .stat-card {
                background: var(--card-bg);
                padding: 20px;
                border-radius: 12px;
                text-align: center;
                box-shadow: var(--shadow-light);
            }

            .stat-number {
                font-size: 2rem;
                font-weight: 700;
                color: var(--primary-color);
            }

            .stat-label {
                color: var(--text-light);
                font-size: 0.9rem;
            }

            /* Architecture Diagram */
            .architecture-diagram {
                background: var(--card-bg);
                padding: 30px;
                border-radius: 12px;
                text-align: center;
                margin: 30px 0;
            }

            .arch-layer {
                background: linear-gradient(
                    135deg,
                    var(--primary-color),
                    var(--secondary-color)
                );
                color: white;
                padding: 20px;
                margin: 10px 0;
                border-radius: 8px;
                position: relative;
            }

            .arch-layer::after {
                content: "↓";
                position: absolute;
                bottom: -20px;
                left: 50%;
                transform: translateX(-50%);
                color: var(--text-light);
                font-size: 1.5rem;
            }

            .arch-layer:last-child::after {
                display: none;
            }

            /* Footer */
            .footer {
                background: var(--text-color);
                color: white;
                padding: 40px 0;
                text-align: center;
            }

            .footer-content {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 30px;
                margin-bottom: 30px;
            }

            .footer-section h3 {
                margin-bottom: 15px;
                color: var(--accent-color);
            }

            .footer-links {
                list-style: none;
            }

            .footer-links a {
                color: #d1d5db;
                text-decoration: none;
                transition: color 0.3s ease;
            }

            .footer-links a:hover {
                color: var(--accent-color);
            }

            /* Responsive Design */
            @media (max-width: 768px) {
                .container {
                    padding: 0 15px;
                }

                .logo {
                    font-size: 2rem;
                }

                .section-title {
                    font-size: 2rem;
                }

                .nav-links {
                    flex-direction: column;
                }

                .nav-link {
                    padding: 12px 20px;
                }

                .grid {
                    grid-template-columns: 1fr;
                }

                .stats-grid {
                    grid-template-columns: repeat(2, 1fr);
                }
            }
        </style>
    </head>
    <body>
        <!-- Header -->
        <header class="header">
            <div class="container">
                <div class="header-content">
                    <h1 class="logo">🐕 PupHub API</h1>
                    <p class="subtitle">
                        Backend Documentation & Implementation Guide
                    </p>
                    <div class="api-status">
                        <span class="status-indicator"></span>
                        <span id="status-text">Checking API Status...</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav">
            <div class="container">
                <div class="nav-container">
                    <div class="nav-links">
                        <a href="#overview" class="nav-link active">Overview</a>
                        <a href="#architecture" class="nav-link"
                            >Architecture</a
                        >
                        <a href="#endpoints" class="nav-link">API Endpoints</a>
                        <a href="#implementation" class="nav-link"
                            >Implementation</a
                        >
                        <a href="#swagger" class="nav-link">API Docs</a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                <!-- Overview Section -->
                <section id="overview" class="section">
                    <h2 class="section-title">Backend Overview</h2>
                    <p class="section-subtitle">
                        PupHub API is a comprehensive RESTful service built with
                        Express.js that provides dog breed information, random
                        dog images, and breed-specific data by integrating with
                        the Dog CEO API.
                    </p>

                    <div class="stats-grid" id="api-stats">
                        <div class="stat-card">
                            <div class="stat-number" id="images-served">--</div>
                            <div class="stat-label">Images Served</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="breeds-viewed">--</div>
                            <div class="stat-label">Breeds Viewed</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="uptime">--</div>
                            <div class="stat-label">Server Uptime</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="api-calls">--</div>
                            <div class="stat-label">API Calls</div>
                        </div>
                    </div>

                    <div class="grid">
                        <div class="card">
                            <div class="card-header">
                                <div
                                    class="card-icon"
                                    style="background: var(--success-color)"
                                >
                                    <i class="fas fa-server"></i>
                                </div>
                                <h3 class="card-title">Express.js Backend</h3>
                            </div>
                            <p class="card-description">
                                Built with Express.js framework, featuring
                                middleware for CORS, JSON parsing, static file
                                serving, and comprehensive request logging.
                            </p>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div
                                    class="card-icon"
                                    style="background: var(--primary-color)"
                                >
                                    <i class="fas fa-database"></i>
                                </div>
                                <h3 class="card-title">In-Memory Storage</h3>
                            </div>
                            <p class="card-description">
                                Utilizes in-memory storage for caching breed
                                data, user favorites, and server statistics for
                                optimal performance during development.
                            </p>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div
                                    class="card-icon"
                                    style="background: var(--accent-color)"
                                >
                                    <i class="fas fa-plug"></i>
                                </div>
                                <h3 class="card-title">
                                    External API Integration
                                </h3>
                            </div>
                            <p class="card-description">
                                Seamlessly integrates with Dog CEO API
                                (dog.ceo/api) to fetch breed information and
                                images with proper error handling and rate
                                limiting.
                            </p>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div
                                    class="card-icon"
                                    style="background: var(--error-color)"
                                >
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <h3 class="card-title">Error Handling</h3>
                            </div>
                            <p class="card-description">
                                Comprehensive error handling with proper HTTP
                                status codes, detailed error messages, and
                                graceful fallbacks for external API failures.
                            </p>
                        </div>
                    </div>
                </section>

                <!-- Architecture Section -->
                <section id="architecture" class="section">
                    <h2 class="section-title">System Architecture</h2>
                    <p class="section-subtitle">
                        Understanding the flow of data and system components in
                        PupHub API
                    </p>

                    <div class="architecture-diagram">
                        <div class="arch-layer">
                            <h3>Frontend Layer</h3>
                            <p>Static HTML/CSS/JS served by Express</p>
                        </div>
                        <div class="arch-layer">
                            <h3>API Layer (Express.js)</h3>
                            <p>RESTful endpoints with middleware stack</p>
                        </div>
                        <div class="arch-layer">
                            <h3>Business Logic</h3>
                            <p>
                                Request processing, data transformation, caching
                            </p>
                        </div>
                        <div class="arch-layer">
                            <h3>External API Integration</h3>
                            <p>Dog CEO API communication via Axios</p>
                        </div>
                    </div>

                    <div class="grid">
                        <div class="card">
                            <div class="card-header">
                                <div
                                    class="card-icon"
                                    style="background: var(--primary-color)"
                                >
                                    <i class="fas fa-cogs"></i>
                                </div>
                                <h3 class="card-title">Middleware Stack</h3>
                            </div>
                            <div class="code-block">
                                app.use(cors()); app.use(express.json());
                                app.use(express.static('frontend'));
                                app.use(logRequest);
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div
                                    class="card-icon"
                                    style="background: var(--success-color)"
                                >
                                    <i class="fas fa-memory"></i>
                                </div>
                                <h3 class="card-title">Data Storage</h3>
                            </div>
                            <div class="code-block">
                                let breedCache = {}; let favoriteImages = [];
                                let userStats = { imagesServed: 0, breedsViewed:
                                0, favoritesCount: 0, serverStartTime:
                                Date.now() };
                            </div>
                        </div>
                    </div>
                </section>

                <!-- API Endpoints Section -->
                <section id="endpoints" class="section">
                    <h2 class="section-title">API Endpoints</h2>
                    <p class="section-subtitle">
                        Complete reference of all available API endpoints with
                        request/response examples
                    </p>

                    <div class="grid">
                        <div class="card endpoint-card">
                            <div class="card-header">
                                <span class="endpoint-method method-get"
                                    >GET</span
                                >
                                <h3 class="card-title">Health Check</h3>
                            </div>
                            <div class="endpoint-url">/api/health</div>
                            <p class="card-description">
                                Returns server status, uptime, and basic
                                statistics.
                            </p>
                            <div class="code-block">
                                { "status": "healthy", "service": "PupHub API",
                                "version": "1.0.0", "uptime": "3600s",
                                "timestamp": "2024-01-01T12:00:00Z" }
                            </div>
                        </div>

                        <div class="card endpoint-card">
                            <div class="card-header">
                                <span class="endpoint-method method-get"
                                    >GET</span
                                >
                                <h3 class="card-title">Get All Breeds</h3>
                            </div>
                            <div class="endpoint-url">/api/breeds</div>
                            <p class="card-description">
                                Fetches and returns all dog breeds with
                                sub-breeds formatted for easy consumption.
                            </p>
                            <div class="code-block">
                                { "success": true, "count": 98, "data": [ {
                                "id": "affenpinscher", "name": "affenpinscher",
                                "breed": "affenpinscher", "subBreed": null,
                                "displayName": "Affenpinscher" } ] }
                            </div>
                        </div>

                        <div class="card endpoint-card">
                            <div class="card-header">
                                <span class="endpoint-method method-get"
                                    >GET</span
                                >
                                <h3 class="card-title">Random Dog Images</h3>
                            </div>
                            <div class="endpoint-url">/api/random?count=5</div>
                            <p class="card-description">
                                Returns random dog images with optional count
                                parameter (max 50).
                            </p>
                            <div class="code-block">
                                { "success": true, "count": 5, "data": [ {
                                "url": "https://images.dog.ceo/breeds/...",
                                "breed": "unknown", "timestamp":
                                "2024-01-01T12:00:00Z" } ] }
                            </div>
                        </div>

                        <div class="card endpoint-card">
                            <div class="card-header">
                                <span class="endpoint-method method-get"
                                    >GET</span
                                >
                                <h3 class="card-title">Breed Images</h3>
                            </div>
                            <div class="endpoint-url">
                                /api/breeds/{breed}/images?count=10
                            </div>
                            <p class="card-description">
                                Gets images for a specific breed. Supports
                                sub-breeds using hyphen notation.
                            </p>
                            <div class="code-block">
                                { "success": true, "breed": "golden-retriever",
                                "count": 10, "data": [ { "url":
                                "https://images.dog.ceo/breeds/...", "breed":
                                "golden-retriever", "timestamp":
                                "2024-01-01T12:00:00Z" } ] }
                            </div>
                        </div>

                        <div class="card endpoint-card">
                            <div class="card-header">
                                <span class="endpoint-method method-get"
                                    >GET</span
                                >
                                <h3 class="card-title">Search Breeds</h3>
                            </div>
                            <div class="endpoint-url">/api/search?q=golden</div>
                            <p class="card-description">
                                Search for breeds by name with minimum 2
                                character requirement.
                            </p>
                            <div class="code-block">
                                { "success": true, "query": "golden", "count":
                                1, "data": [ { "id": "golden-retriever", "name":
                                "golden retriever", "match": "exact" } ] }
                            </div>
                        </div>

                        <div class="card endpoint-card">
                            <div class="card-header">
                                <span class="endpoint-method method-get"
                                    >GET</span
                                >
                                <h3 class="card-title">API Statistics</h3>
                            </div>
                            <div class="endpoint-url">/api/stats</div>
                            <p class="card-description">
                                Returns detailed server statistics including
                                uptime and usage metrics.
                            </p>
                            <div class="code-block">
                                { "success": true, "data": { "imagesServed":
                                1337, "breedsViewed": 42, "favoritesCount": 15,
                                "uptime": { "minutes": 60, "seconds": 30 } } }
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Implementation Section -->
                <section id="implementation" class="section">
                    <h2 class="section-title">Implementation Details</h2>
                    <p class="section-subtitle">
                        Key implementation patterns and best practices used in
                        PupHub API
                    </p>

                    <div class="grid grid-2">
                        <div class="card">
                            <div class="card-header">
                                <div
                                    class="card-icon"
                                    style="background: var(--primary-color)"
                                >
                                    <i class="fas fa-code"></i>
                                </div>
                                <h3 class="card-title">Request Logging</h3>
                            </div>
                            <p class="card-description">
                                Custom middleware for logging all incoming
                                requests with timestamps.
                            </p>
                            <div class="code-block">
                                const logRequest = (req, res, next) => { const
                                timestamp = new Date().toISOString();
                                console.log(`[${timestamp}] ${req.method}
                                ${req.path}`); next(); };
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div
                                    class="card-icon"
                                    style="background: var(--success-color)"
                                >
                                    <i class="fas fa-sync"></i>
                                </div>
                                <h3 class="card-title">Async/Await Pattern</h3>
                            </div>
                            <p class="card-description">
                                Modern async/await syntax for handling external
                                API calls and promises.
                            </p>
                            <div class="code-block">
                                app.get('/api/breeds', async (req, res) => { try
                                { const response = await
                                axios.get(`${DOG_API_BASE}/breeds/list/all`); //
                                Process response... } catch (error) { // Handle
                                error... } });
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div
                                    class="card-icon"
                                    style="background: var(--warning-color)"
                                >
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <h3 class="card-title">Error Handling</h3>
                            </div>
                            <p class="card-description">
                                Comprehensive error handling with proper HTTP
                                status codes and user-friendly messages.
                            </p>
                            <div class="code-block">
                                } catch (error) { res.status(500).json({
                                success: false, error: 'Failed to fetch breeds',
                                message: error.message, timestamp: new
                                Date().toISOString() }); }
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div
                                    class="card-icon"
                                    style="background: var(--accent-color)"
                                >
                                    <i class="fas fa-tachometer-alt"></i>
                                </div>
                                <h3 class="card-title">
                                    Performance Optimization
                                </h3>
                            </div>
                            <p class="card-description">
                                Caching strategies and request limiting to
                                optimize performance and reduce API calls.
                            </p>
                            <div class="code-block">
                                // Cache breed data if (response.data.status ===
                                'success') { breedCache = response.data.message;
                                } // Limit requests const maxCount =
                                Math.min(count, 50);
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Swagger Documentation Section -->
                <section id="swagger" class="section">
                    <h2 class="section-title">Interactive API Documentation</h2>
                    <p class="section-subtitle">
                        Explore and test the API endpoints using our interactive
                        Swagger documentation
                    </p>

                    <div class="card">
                        <div class="card-header">
                            <div
                                class="card-icon"
                                style="background: var(--success-color)"
                            >
                                <i class="fas fa-book"></i>
                            </div>
                            <h3 class="card-title">Swagger UI</h3>
                        </div>
                        <p class="card-description">
                            Interactive API documentation with live testing
                            capabilities. Try out endpoints directly from your
                            browser and see real responses.
                        </p>
                        <div style="margin-top: 20px">
                            <a
                                href="/.netlify/functions/swagger-spec"
                                class="btn btn-primary"
                                target="_blank"
                            >
                                <i class="fas fa-external-link-alt"></i>
                                View API Specification
                            </a>
                            <button
                                onclick="window.pupHubDocs?.testEndpoint('/api/health', 'GET', this)"
                                class="btn btn-secondary"
                            >
                                <i class="fas fa-heartbeat"></i>
                                Test API Health
                            </button>
                        </div>
                    </div>

                    <div class="grid">
                        <div class="card">
                            <div class="card-header">
                                <div
                                    class="card-icon"
                                    style="background: var(--primary-color)"
                                >
                                    <i class="fas fa-play"></i>
                                </div>
                                <h3 class="card-title">Try It Out</h3>
                            </div>
                            <p class="card-description">
                                Test endpoints directly from the documentation
                                with real API calls and responses.
                            </p>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div
                                    class="card-icon"
                                    style="background: var(--accent-color)"
                                >
                                    <i class="fas fa-file-code"></i>
                                </div>
                                <h3 class="card-title">Schema Validation</h3>
                            </div>
                            <p class="card-description">
                                Complete request/response schemas with
                                validation rules and example payloads.
                            </p>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-section">
                        <h3>API Resources</h3>
                        <ul class="footer-links">
                            <li><a href="/.netlify/functions/health">Health Check</a></li>
                            <li><a href="/.netlify/functions/breeds">All Breeds</a></li>
                            <li><a href="/.netlify/functions/stats">Statistics</a></li>
                            <li><a href="/.netlify/functions/swagger-spec">API Docs</a></li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h3>Technology Stack</h3>
                        <ul class="footer-links">
                            <li>Netlify Functions</li>
                            <li>MongoDB Atlas</li>
                            <li>Node.js</li>
                            <li></li>Axios</li>
                            <li>Dog CEO API</li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h3>About</h3>
                        <p>
                            PupHub API is a demonstration project showcasing
                            serverless architecture with MongoDB Atlas and Netlify Functions.
                        </p>
                    </div>
                </div>
                <div
                    style="
                        text-align: center;
                        padding-top: 20px;
                        border-top: 1px solid #374151;
                    "
                >
                    <p>
                        &copy; 2024 PupHub API. Built with ❤️ for learning
                        backend development.
                    </p>
                </div>
            </div>
        </footer>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
        <script>
            // API Status and Stats Management
            class PupHubDocs {
                constructor() {
                    this.baseUrl = window.location.origin;
                    this.userId = this.generateUserId();
                    this.sessionId = this.generateSessionId();
                    this.init();
                }

                generateUserId() {
                    let userId = localStorage.getItem('puphub_user_id');
                    if (!userId) {
                        userId = `user_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
                        localStorage.setItem('puphub_user_id', userId);
                    }
                    return userId;
                }

                generateSessionId() {
                    return `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
                }

                getApiHeaders() {
                    return {
                        'Content-Type': 'application/json',
                        'x-user-id': this.userId,
                        'x-session-id': this.sessionId
                    };
                }

                async init() {
                    await this.checkApiStatus();
                    await this.loadStats();
                    this.setupNavigation();
                    this.setupScrollSpy();
                    this.setupApiTesting();
                }

                async checkApiStatus() {
                    try {
                        const response = await fetch(
                            `${this.baseUrl}/api/health`,
                            {
                                headers: this.getApiHeaders()
                            }
                        );
                        const data = await response.json();

                        if (data.status === "healthy") {
                            document.getElementById("status-text").textContent =
                                `API Online (${data.environment})`;
                            document.querySelector(
                                ".status-indicator",
                            ).style.background = "#10b981";

                            // Display additional info
                            if (data.database && data.database.status === 'connected') {
                                document.getElementById("status-text").textContent =
                                    `API Online - ${data.database.type} Connected`;
                            }
                        } else {
                            throw new Error("API not healthy");
                        }
                    } catch (error) {
                        console.error("Health check failed:", error);
                        document.getElementById("status-text").textContent =
                            "API Offline";
                        document.querySelector(
                            ".status-indicator",
                        ).style.background = "#ef4444";
                    }
                }

                async loadStats() {
                    try {
                        const response = await fetch(
                            `${this.baseUrl}/api/stats?timeframe=today`,
                            {
                                headers: this.getApiHeaders()
                            }
                        );
                        const data = await response.json();

                        if (data.success && data.data && data.data.overview) {
                            const stats = data.data.overview;
                            const performance = data.data.performance;

                            document.getElementById(
                                "images-served",
                            ).textContent = this.formatNumber(stats.imagesServed || 0);
                            document.getElementById(
                                "breeds-viewed",
                            ).textContent = this.formatNumber(stats.breedsViewed || 0);
                            document.getElementById("uptime").textContent =
                                performance.uptime?.display || "--";
                            document.getElementById("api-calls").textContent =
                                this.formatNumber(stats.totalRequests || 0);
                        }
                    } catch (error) {
                        console.error("Failed to load stats:", error);
                        // Set default values
                        document.getElementById("images-served").textContent = "--";
                        document.getElementById("breeds-viewed").textContent = "--";
                        document.getElementById("uptime").textContent = "--";
                        document.getElementById("api-calls").textContent = "--";
                    }
                }

                formatNumber(num) {
                    if (num >= 1000000) {
                        return (num / 1000000).toFixed(1) + 'M';
                    } else if (num >= 1000) {
                        return (num / 1000).toFixed(1) + 'K';
                    }
                    return num.toString();
                }

                setupNavigation() {
                    const navLinks = document.querySelectorAll(".nav-link");

                    navLinks.forEach((link) => {
                        link.addEventListener("click", (e) => {
                            e.preventDefault();

                            // Remove active class from all links
                            navLinks.forEach((l) =>
                                l.classList.remove("active"),
                            );

                            // Add active class to clicked link
                            link.classList.add("active");

                            // Scroll to section
                            const targetId = link
                                .getAttribute("href")
                                .substring(1);
                            const targetElement =
                                document.getElementById(targetId);

                            if (targetElement) {
                                targetElement.scrollIntoView({
                                    behavior: "smooth",
                                    block: "start",
                                });
                            }
                        });
                    });
                }

                setupScrollSpy() {
                    const sections = document.querySelectorAll("section[id]");
                    const navLinks = document.querySelectorAll(".nav-link");

                    const observerOptions = {
                        root: null,
                        rootMargin: "-50px 0px -50px 0px",
                        threshold: 0.1,
                    };

                    const observer = new IntersectionObserver((entries) => {
                        entries.forEach((entry) => {
                            if (entry.isIntersecting) {
                                const currentId =
                                    entry.target.getAttribute("id");

                                // Remove active class from all nav links
                                navLinks.forEach((link) =>
                                    link.classList.remove("active"),
                                );

                                // Add active class to current section's nav link
                                const currentNavLink = document.querySelector(
                                    `.nav-link[href="#${currentId}"]`,
                                );
                                if (currentNavLink) {
                                    currentNavLink.classList.add("active");
                                }
                            }
                        });
                    }, observerOptions);

                    sections.forEach((section) => {
                        observer.observe(section);
                    });
                }

                setupApiTesting() {
                    // Add interactive API testing buttons
                    this.addTestButton('Test Health Endpoint', '/api/health', 'GET');
                    this.addTestButton('Test Breeds Endpoint', '/api/breeds', 'GET');
                    this.addTestButton('Test Random Dog', '/api/random?count=3', 'GET');
                    this.addTestButton('Test Statistics', '/api/stats', 'GET');
                }

                addTestButton(label, endpoint, method) {
                    const button = document.createElement('button');
                    button.className = 'btn btn-secondary';
                    button.innerHTML = `<i class="fas fa-play"></i> ${label}`;
                    button.style.margin = '5px';

                    button.addEventListener('click', async () => {
                        await this.testEndpoint(endpoint, method, button);
                    });

                    // Add to swagger section
                    const swaggerSection = document.getElementById('swagger');
                    if (swaggerSection) {
                        let testContainer = swaggerSection.querySelector('.test-container');
                        if (!testContainer) {
                            testContainer = document.createElement('div');
                            testContainer.className = 'test-container';
                            testContainer.style.marginTop = '20px';
                            testContainer.style.padding = '20px';
                            testContainer.style.backgroundColor = 'var(--bg-color)';
                            testContainer.style.borderRadius = '8px';

                            const title = document.createElement('h4');
                            title.textContent = 'Live API Testing';
                            title.style.marginBottom = '15px';
                            testContainer.appendChild(title);

                            swaggerSection.appendChild(testContainer);
                        }
                        testContainer.appendChild(button);
                    }
                }

                async testEndpoint(endpoint, method, button) {
                    const originalText = button.innerHTML;
                    button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Testing...';
                    button.disabled = true;

                    try {
                        const startTime = Date.now();
                        const response = await fetch(`${this.baseUrl}${endpoint}`, {
                            method: method,
                            headers: this.getApiHeaders()
                        });

                        const responseTime = Date.now() - startTime;
                        const data = await response.json();

                        // Show results in a modal or console
                        console.log(`API Test Results for ${endpoint}:`, {
                            status: response.status,
                            responseTime: `${responseTime}ms`,
                            data: data
                        });

                        // Update button to show success
                        button.innerHTML = `<i class="fas fa-check"></i> Success (${responseTime}ms)`;
                        button.style.backgroundColor = 'var(--success-color)';

                        // Show results in UI
                        this.showTestResults(endpoint, response.status, responseTime, data);

                    } catch (error) {
                        console.error(`API Test failed for ${endpoint}:`, error);
                        button.innerHTML = `<i class="fas fa-times"></i> Failed`;
                        button.style.backgroundColor = 'var(--error-color)';
                    }

                    // Reset button after 3 seconds
                    setTimeout(() => {
                        button.innerHTML = originalText;
                        button.disabled = false;
                        button.style.backgroundColor = '';
                    }, 3000);
                }

                showTestResults(endpoint, status, responseTime, data) {
                    // Create or update results container
                    let resultsContainer = document.querySelector('.api-test-results');
                    if (!resultsContainer) {
                        resultsContainer = document.createElement('div');
                        resultsContainer.className = 'api-test-results';
                        resultsContainer.style.marginTop = '20px';
                        resultsContainer.style.padding = '15px';
                        resultsContainer.style.backgroundColor = 'var(--card-bg)';
                        resultsContainer.style.borderRadius = '8px';
                        resultsContainer.style.border = '1px solid var(--border-color)';

                        const testContainer = document.querySelector('.test-container');
                        if (testContainer) {
                            testContainer.appendChild(resultsContainer);
                        }
                    }

                    const resultHtml = `
                        <div style="margin-bottom: 10px;">
                            <strong>${endpoint}</strong>
                            <span style="color: ${status < 400 ? 'var(--success-color)' : 'var(--error-color)'}">
                                ${status} (${responseTime}ms)
                            </span>
                        </div>
                        <pre style="background: var(--bg-color); padding: 10px; border-radius: 4px; font-size: 0.8rem; max-height: 200px; overflow-y: auto;">
                            ${JSON.stringify(data, null, 2)}
                        </pre>
                    `;

                    resultsContainer.innerHTML = resultHtml;
                }
            }

            // Initialize the documentation app
            document.addEventListener("DOMContentLoaded", () => {
                window.pupHubDocs = new PupHubDocs();
            });

            // Refresh stats every 30 seconds
            setInterval(async () => {
                if (window.pupHubDocs) {
                    await window.pupHubDocs.loadStats();
                }
            }, 30000);
        </script>
    </body>
</html>
